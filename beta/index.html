<!DOCTYPE html>
<html>
<title>Gesundbrunnen RAID Beta</title>
<head>
<style>
body {
	font-family: calibri;
	font-size: x-large;
}
input.normal {
	font-size: 100%;
	font-family: calibri;
	margin-right: 10px;
}
select.normal {
	font-size: 100%;
	font-family: calibri;
}
span.title {
	font-size: 150%;
	font-weight: bold;
	margin-top: 15px;
}
span.warnbl {
	color: black;
}
span.warning {
	color: red;
}
span.dis {
	font-size: medium;
	margin-top: 15px;
}
button.normal {
	font-size: 100%;
	font-family: calibri;
}
button.bold {
	font-size: 100%;
	font-family: calibri;
	font-weight: bold;
}
</style>
</head>
<body>

<span class="title" id="title">Gesundbrunnen Raid Beta</span><br><br>

<span class="normal" id="txt_beta">Achtung, dies ist die Beta Seite. Funktionen sind eventuell beeinträchtigt und fehlerhaft.</span><br>

<span class="normal"><a id="txt_mainlink" href="https://kimahree.github.io/">Zur Hauptseite</a></span><br><br>

<span id="txt_lang">Sprache:</span>
<select class="normal" id="lang" onchange="changeLang()">
  <option value="de">Deutsch</option>
  <option value="en">English</option>
</select> <br> <br>

Raid:
<select class="normal" id="raid">
  <option disabled style="font-style:italic">5er</option>
  <option id="t5_1">Dialga</option>
  <option hidden id="t5_2"></option>
  <option hidden id="t5_3"></option>
  <option hidden id="t5_4"></option>
  <option hidden id="t5_5"></option>
  <option disabled></option>
  <option style="font-style:italic">4er</option>
  <option id="t4_1">Absol</option>
  <option id="t4_2">Alola-Knogga</option>
  <option id="t4_3">Despotar</option>
  <option id="t4_4">Sarzenia</option>
  <option id="t4_5">Tengulist</option>
</select>

<br><br>
<span id="txt_gym">Arena:</span>
<input id="gym" list="gyms" style="font-size:100%;font-family:calibri" size="30">
<datalist id="gyms" >
  <option value="1892 Historisches Gebäude">
  <option value="AEG Beamtentor">
  <option label="EX-Raid Arena" value="Amtsgericht Wedding">
  <option label="S-Bahnhof Humboldthain" value="Bahnhof Humboldthain">
  <option value="Bahnsteig S-Bahnhof Gesundbrunnen">
  <option value="Balance On The Globe">
  <option value="Berliner Mauer S Wollankstraße">
  <option value="Birkenmural">
  <option value="Bornholmer Straße Border Crossing">
  <option value="Bösebrücke Bornholmer Straße">
  <option value="Brunnen DRK">
  <option label="U Voltastr." value="Brunnenstraße">
  <option value="Bunker Humboldthain">
  <option value="Drei-Säulen-Brunnen">
  <option label="Friedhof / Kirchhof"value="Eingangstor St. Elisabeth">
  <option label="EX-Raid Arena" value="Ente">
  <option value="Ernst Reuter Büste">
  <option value="Ev. Stephanus Kirche">
  <option value="Gedenkstein Opfer der Berliner Mauer">
  <option label="U Pankstr" value="Gewachsen auf Beton Mural">
  <option value="Haus Graffiti">
  <option value="Hausmalerei">
  <option value="Hauswächter">
  <option label="EX-Raid Arena" value="Hippo Fountain">
  <option value="Humboldtpark">
  <option label="Bellermannstr." value="Jungfräulich Maria St.">
  <option value="Jux und Tollerei">
  <option label="EX-Raid Arena" value="Kamel">
  <option value="Kulturverein Christiana">
  <option value="Mother Statue">
  <option value="Portal zur Kaiser Wilhelm und Augusta Stiftung">
  <option value="Rosengarten am Humboldthain">
  <option value="S-Bahnhof Bornholmer Straße">
  <option value="Shadow People">
  <option value="Springbrunnen am Rathaus">
  <option label="EX-Raid Arena" value="St. Sebastian-Kirche">
  <option label="Jüdisches Krankenhaus" value="Stolpersteine Georg und Rudolf Juliusburger">
  <option value="Swinemünder Brücke">
  <option value="The Real Old Mechanical Door">
  <option value="U-Bahnhof Osloer Straße">
  <option value="Vergessene Brücke">
  <option label="Hotel" value="Wyndham Garden Entrance Relief">
  <option label="EX-Raid Arena" value="Zwillingsstatue">
</datalist>
<br><br>

<span id="txt_hatch">Schlüpfzeit:</span>
<input type="time" class="normal" id="time" oninput="checkHatchTime()"></input><span class="warning" id="timeh"></span>
<br><br>

<span id="txt_start">Startzeit:</span>
<input type="time" class="normal" id="start" oninput="checkStartTime()"></input><span class="warning" id="starth"></span>
<br><br>

<span id="txt_player">Teilnehmer:</span><br>
<textarea id="player" rows="3" cols="30" style="font-size:100%;font-family:calibri"></textarea>
<br><br>

<span id="txt_instr">Drücke auf "Start!", überprüfe deine Angaben und drücke dann auf "In WhatsApp posten".<br></span>
<span hidden id="txt_multi">Um einen Multiraid zu posten, ändere jetzt die Angaben oben für den nächsten Raid und drücke dann auf "Multiraid!". Wiederhole dies, bis alle Raids eingetragen sind.<br></span><br>

<span id="starter"><button class="normal" onclick='generateRaid("")'>Start!</button></span>
<span hidden=true id="addRaid"><button class="normal" onclick="addRaid()">Multiraid!</button></span>
<span id="raidwarn" class="warning"></span>

<br><br>
<span id="ex"></span>
<br><br>
<span id="but"></span>
<br><br>

<span class="dis">Made by kimahree. This website is not affiliated with Niantic or Nintendo.<br>Pokémon And All Respective Names are Trademark & © of Nintendo 1996-2019.</span>

<script>
var txtid = ["txt_beta","txt_mainlink","txt_lang","txt_gym","txt_hatch","txt_start","txt_player","txt_instr","txt_button","txt_multi"];

var txt_de = ["Achtung, dies ist die Beta Seite. Funktionen sind eventuell beeinträchtigt und fehlerhaft.",
"Zur Hauptseite",
"Sprache:",
"Arena:",
"Schlüpfzeit:",
"Startzeit:",
"Teilnehmer:",
'Drücke auf "Start!", überprüfe deine Angaben und drücke dann auf "In WhatsApp posten".<br>',
"In WhatsApp posten",
'Um einen Multiraid zu posten, ändere jetzt die Angaben oben für den nächsten Raid und drücke dann auf "Multiraid!". Wiederhole dies, bis alle Raids eingetragen sind.<br>'
];

var txt_en = ["Attention, you're currently on the beta page. Functionality might be compromised and bugged.",
"To the main site",
"Language:",
"Gym:",
"Hatch time:",
"Start time:",
"Participants:",
'Press "Start!", check your data and then press "Post in WhatsApp".<br>',
"Post in WhatsApp",
'To post a Multiraid, change the data above for the next raid and then press "Multiraid!". Repeat until all raids have been added.<br>'
];

var hatchwarn = 0;
var startwarn = 0;
var raidwarn = 0;

var warn_de =["",
"Raids schlüpfen nicht vor 6 Uhr.",
"Raids schlüpfen nicht nach 21 Uhr.",
"Dieser Raid ist bereits abgelaufen.",
"Die Startzeit kann nicht in der Vergangenheit liegen.",
"Die Startzeit muss innerhalb von 45 Minuten nach der Schlüpfzeit sein.",
"Der Raidboss hat weniger als 5 Minuten Restzeit bei dieser Startzeit.",
"Die Startzeit kann nicht vor der Schlüpfzeit sein.",
"Du hast die maximale Anzahl an Raids für einen Multiraid erreicht.",
"Bitte wähle eine Arena aus."
];

var warn_en =["",
"Raids do not hatch before 6:00.",
"Raids do not hatch after 21:00.",
"This raid has already expired.",
"The start time cannot be in the past.",
"The start time has to be within 45 minutes after the hatch time.",
"There will be less than 5 minutes remaining at this start time.",
"You cannot start a raid before it hatches.",
"You have reached the maximum amount of raids for a multiraid.",
"Please choose a gym."
];

var raid_de = ["5er","Dialga","","","","","","4er","Absol","Alola-Knogga","Despotar","Sarzenia","Tengulist"];
var raid_en = ["Tier 5","Dialga","","","","","","Tier 4","Absol","Alolan Marowak","Tyranitar","Victreebel","Shiftry"];

var ex = ["Amtsgericht Wedding", "Ente", "Hippo Fountain", "Kamel", "St. Sebastian-Kirche", "Zwillingsstatue"];

var maps = [
"https://goo.gl/maps/LJthotdr7b72", // 1892 Historisches Gebäude
"https://goo.gl/maps/pCd3BJgke8B2", // AEG Beamtentor
"https://goo.gl/maps/q79rW3P5iz82", // Amtsgericht Wedding (EX)
"https://goo.gl/maps/NoMxjQmX8Yz",  // Bahnhof Humboldthain
"https://goo.gl/maps/P6fLg6nSaKM2", // Bahnsteig S-Bahnhof Gesundbrunnen
"https://goo.gl/maps/bM2QWrCkDhq",  // Balance on the Globe
"https://goo.gl/maps/7ggyACh3c7y",  // Berliner Mauer S Wollankstraße
"https://goo.gl/maps/LUjPLZgELHR2", // Birkenmural
"https://goo.gl/maps/borFEx1Zp3D2", // Bornholmer Straße Border Crossing
"https://goo.gl/maps/Fkb2uqJf8kJ2", // Bösebrücke Bornholmer Straße
"https://goo.gl/maps/WqegcLtthPx",  // Brunnen DRK
"https://goo.gl/maps/QEN9FksYAUR2", // Brunnenstraße
"https://goo.gl/maps/Q5xj3TTdQfR2", // Bunker Humboldthain
"https://goo.gl/maps/BD6HAd3WwAC2", // Drei-Säulen-Brunnen
"https://goo.gl/maps/6WQqtbYTLFD2", // Eingangstor St. Elisabeth
"https://goo.gl/maps/9BhrrYtz8432", // Ente (EX)
"https://goo.gl/maps/c3bK2hVWqy32", // Ernst Reuter Büste
"https://goo.gl/maps/Yxwu2ubRmm52", // Ev. Stephanus Kirche
"https://goo.gl/maps/vKCJtW7CXjm",  // Gedenkstein Opfer der Berliner Mauer
"https://goo.gl/maps/8MVUihQXCQ82", // Gewachsen auf Beton Mural
"https://goo.gl/maps/NJWvyGY1xN22", // Haus Graffiti
"https://goo.gl/maps/wJXuVvpzvTv",  // Hausmalerei
"https://goo.gl/maps/Yv9g8aRw9S72", // Hauswächter
"https://goo.gl/maps/zRQmhYSnYTG2", // Hippo Fountain (EX)
"https://goo.gl/maps/L6gci4KrmRM2", // Humboldtpark
"https://goo.gl/maps/4qMqQB4rPXG2", // Jungfräulich Maria St.
"https://goo.gl/maps/vLZcbgbGXrD2", // Jux und Tollerei
"https://goo.gl/maps/xCWVtJhqw1r",  // Kamel (EX)
"https://goo.gl/maps/Mks22S8syUn",  // Kulturverein Christiana
"https://goo.gl/maps/obrXpaCe8Kp",  // Mother Statue
"https://goo.gl/maps/Z132sxwCnHE2", // Portal zur Kaiser Wilhelm und Augusta Stiftung
"https://goo.gl/maps/uuFsiJBmDp72", // Rosengarten am Humboldthain
"https://goo.gl/maps/fTpjjxxPXbK2", // S-Bahnhof Bornholmer Straße
"https://goo.gl/maps/PzqU2mtenL42", // Shadow People
"https://goo.gl/maps/j5WL5s81k2K2", // Springbrunnen am Rathaus
"https://goo.gl/maps/za2Fq6XPC5t",  // St. Sebastian-Kirche (EX)
"https://goo.gl/maps/kPsKT4sGpPK2", // Stolpersteine Georg und Rudolf Juliusburger
"https://goo.gl/maps/hH2WCCHeLwK2", // Swinemünder Brücke
"https://goo.gl/maps/WvKP2eCWdu12", // The Real Old Mechanical Door
"https://goo.gl/maps/67rcURgu1Y82", // U-Bahnhof Osloer Straße
"https://goo.gl/maps/NTR2AcNt6pp",  // Vergessene Brücke
"https://goo.gl/maps/o2XreJkiJTx",  // Wyndham Garden Entrance Relief
"https://goo.gl/maps/q1rctADEE8q"   // Zwillingsstatue (EX)
];

var multi = 0;

function generateRaid(raidtext) {
  document.getElementById("ex").innerHTML = "";
  document.getElementById("but").innerHTML = "";

  var text = raidtext;
  var gym = document.getElementById("gym").value;
  
  if (!gym) {
    raidwarn = 9;
	if (getLang() == "de") {
		document.getElementById("raidwarn").innerHTML = warn_de[9];
	}
	if (getLang() == "en") {
		document.getElementById("raidwarn").innerHTML = warn_en[9];
	}
	if (raidtext == "" && !document.getElementById("addRaid").getAttributeNode("hidden")) {
	    var hid3 = document.createAttribute("hidden");
		document.getElementById("addRaid").setAttributeNode(hid3);
	}
	return;
  }
  
  var raid = document.getElementById("raid").value;
  var time = document.getElementById("time").value;
  var start = document.getElementById("start").value;
  var diff = (document.getElementById("start").valueAsNumber - document.getElementById("time").valueAsNumber) / 60000;
  var player = document.getElementById("player").value;
  player = player.replace(/\n/g,"<br>")
  
  if (raidtext == "") { 
	multi = 1;
	var hid = document.getElementById("addRaid").getAttributeNode("hidden");
	if (hid) {
		document.getElementById("addRaid").removeAttributeNode(hid);
	}
	var hid1 = document.getElementById("txt_multi").getAttributeNode("hidden");
	if (hid1) {
		document.getElementById("txt_multi").removeAttributeNode(hid1);
	}
	if (!document.getElementById("txt_instr").getAttributeNode("hidden")) {
		var hid2 = document.createAttribute("hidden");
		document.getElementById("txt_instr").setAttributeNode(hid2);
	}
  }
  
  if (multi == 2) {
	text = "🚨 <b>DOPPELRAID</b> 🚨<br>" + text;
  }
  
  if (multi == 3) {
	text = text.replace("DOPPELRAID","TRIPLERAID");
  }
  
  if (multi == 4) {
	text = text.replace("🚨 <b>TRIPLERAID</b> 🚨","🚂 <b>RAID-TRAIN</b> 🚂");
  }
  
  if (multi == 7) {
	text = text.replace("RAID-TRAIN","CRAZY RAID-TRAIN");
  }
  
  
  
  if (ex.find(checkEx)) {
    text = text + "🎗 <b>EX-Raid Arena</b> 🎗 <br>";
  }
  
  text = text + "<b>" + raid + " " + gym + "</b> ";
  
  if (time) {
	text = text + "(🐣" + time + ")";
  }
  
  var gyms = document.getElementById("gyms");
  var i;
  for (i=0; gyms.options[i].value != gym; i++) {}
  
  text = text + "<br>" + maps[i];
  
  text = text + "<br><br><b>Start:</b> ";
   
  if ((diff <= 45 && diff >= 0) || (time == "" && start != "")) {
	text = text + start;
  } else {
    text = text + "?";
  }
  text = text + "<br><br>" + player
  document.getElementById("ex").innerHTML = text;
  
  var text2 = text.replace(/<br>/g,"\n");
  text2 = text2.replace(/<b>/g,"*");
  text2 = text2.replace(/<\/b>/g,"*");
  
  var n = encodeURIComponent(text2);
  var bu = document.createElement("BUTTON");
  
  var btt1 = document.createAttribute("onclick");
  btt1.value = "location.href='https://api.whatsapp.com/send?text=" + n + "';";
  bu.setAttributeNode(btt1);
  
  var btt2 = document.createAttribute("class");
  btt2.value = "bold";
  bu.setAttributeNode(btt2);
  
  var btt3 = document.createAttribute("id");
  btt3.value = "txt_button";
  bu.setAttributeNode(btt3);
  
  if (getLang() == "de") {
	var bt = document.createTextNode(txt_de[8]);
  }
  if (getLang() == "en") {
	var bt = document.createTextNode(txt_en[8]);
  }
  bu.appendChild(bt);
  
  document.getElementById("but").appendChild(bu);
 
  
  if (raidwarn != 0) {
	raidwarn = 0;
	document.getElementById("raidwarn").innerHTML = "";
  }
}

function addRaid() {
  multi++;
  var ol = document.getElementById("ex").innerHTML;
  var old = ol + "<br><br>";
  generateRaid(old);
  if (raidwarn != 0) {
	multi--;
	document.getElementById("ex").innerHTML = ol;
  }
  if (multi >= 10) {
	raidwarn = 8;
	var dsbl = document.createAttribute("hidden");
	dsbl.value = true;
	document.getElementById("addRaid").setAttributeNode(dsbl);
	if (getLang() == "de") {
		document.getElementById("raidwarn").innerHTML = warn_de[8];
	}
	if (getLang() == "en") {
		document.getElementById("raidwarn").innerHTML = warn_en[8];
	}
  }
}

function checkHatchTime() {
  var hat = new Date();
  var hat2 = new Date(hat.toDateString());
  var hatch = document.getElementById("time").valueAsNumber;
  hat2 = hat - hat2;
  hat2 = hatch - hat2;
  if (hatch < 21600000) {
	hatchwarn = 1;
  } else if (hatch > 75600000) {
    hatchwarn = 2;
  } else if (hat2 < -2700000) {
    hatchwarn = 3;
  } else {
    hatchwarn = 0;
  }
  
  if (getLang() == "de") {
	document.getElementById("timeh").innerHTML = '<span style="font-size:20px">'+warn_de[hatchwarn]+'</span>';
  }
  if (getLang() == "en") {
	document.getElementById("timeh").innerHTML = '<span style="font-size:20px">'+warn_en[hatchwarn]+'</span>';
  }
  
}

function checkStartTime() {
  var now = new Date();
  var now2 = new Date(now.toDateString());
  var sta = document.getElementById("start").valueAsNumber;
  var hat = document.getElementById("time").valueAsNumber;
  now2 = now - now2;
  now2 = sta - now2;
  hat = sta - hat;
  
  var ste = document.createAttribute("class");
  ste.value = "warning";
 
  
  if (now2 < 0) {
	startwarn = 4;
  } else if (hat > 2700000) {
    startwarn = 5;
  } else if (hat > 2400000) {
	ste.value = "warnbl";
    startwarn = 6;
  } else if (hat < 0) {
	startwarn = 7;
  } else {
    startwarn = 0;
  }
  
  if (getLang() == "de") {
	document.getElementById("starth").innerHTML = '<span style="font-size:20px">'+warn_de[startwarn]+'</span>';
  }
  if (getLang() == "en") {
	document.getElementById("starth").innerHTML = '<span style="font-size:20px">'+warn_en[startwarn]+'</span>';
  }
  document.getElementById("starth").setAttributeNode(ste);
}
  
function checkEx(ext) {
  return ext == document.getElementById("gym").value;
}

function changeLang() {
  var i
  if (getLang() == "de") {
	for (i = 0; i < txtid.length; i++) {
		try {
			document.getElementById(txtid[i]).innerHTML = txt_de[i];
		} catch {}
	}
	for (i = 0; i < raid_de.length; i++) {
		if (raid_en[i] != raid_de[i]) {
			var lab = document.getElementById("raid").options[i].getAttributeNode("label");
			document.getElementById("raid").options[i].removeAttributeNode(lab);
		}
	}
	document.getElementById("timeh").innerHTML = '<span style="font-size:20px">'+warn_de[hatchwarn]+'</span>';
	document.getElementById("starth").innerHTML = '<span style="font-size:20px">'+warn_de[startwarn]+'</span>';
	document.getElementById("raidwarn").innerHTML = warn_de[raidwarn];
  }
  if (getLang() == "en") {
	for (i = 0; i < txtid.length; i++) {
		try {
			document.getElementById(txtid[i]).innerHTML = txt_en[i];
		} catch {}
	}	
	for (i = 0; i < raid_en.length; i++) {
		if (raid_en[i] != raid_de[i]) {
			var lab = document.createAttribute("label");
			lab.value = raid_en[i];
			document.getElementById("raid").options[i].setAttributeNode(lab);
		}
	}
	document.getElementById("timeh").innerHTML = '<span style="font-size:20px">'+warn_en[hatchwarn]+'</span>';
	document.getElementById("starth").innerHTML = '<span style="font-size:20px">'+warn_en[startwarn]+'</span>';
	document.getElementById("raidwarn").innerHTML = warn_en[raidwarn];
  }
}

function getLang() {
	return document.getElementById("lang").value;
}

</script>

</body>
</html>
