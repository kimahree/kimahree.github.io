<!DOCTYPE html>
<html>
<title>Gesundbrunnen RAID Beta</title>
<head>
<style>
body {
	font-family: calibri;
	font-size: x-large;
}
div.dis {
	font-size: 75%;
}
</style>
</head>
<body>

<h2>Gesundbrunnen Raid Beta mit Arenensuche</h2>

Raid:
<select id="raid" style="font-size:100%;font-family:calibri">
  <option disabled style="font-style:italic">5er</option>
  <option>Dialga</option>
  <option disabled></option>
  <option style="font-style:italic">4er</option>
  <option>Absol</option>
  <option>Alola-Knogga</option>
  <option>Despotar</option>
  <option>Sarzenia</option>
  <option>Tengulist</option>
</select>

<br><br>
Arena:
<input id="gym" list="gyms" style="font-size:100%;font-family:calibri" size="30">
<datalist id="gyms" >
  <option value="1892 Historisches Gebäude">
  <option value="AEG Beamtentor">
  <option label="EX-Raid Arena" value="Amtsgericht Wedding">
  <option label="S-Bahnhof Humboldthain" value="Bahnhof Humboldthain">
  <option value="Bahnsteig S-Bahnhof Gesundbrunnen">
  <option value="Balance On The Globe">
  <option value="Berliner Mauer S Wollankstraße">
  <option value="Birkenmural">
  <option value="Bornholmer Straße Border Crossing">
  <option value="Bösebrücke Bornholmer Straße">
  <option value="Brunnen DRK">
  <option label="U Voltastr." value="Brunnenstraße">
  <option value="Bunker Humboldthain">
  <option value="Drei-Säulen-Brunnen">
  <option label="Friedhof / Kirchhof"value="Eingangstor St. Elisabeth">
  <option label="EX-Raid Arena" value="Ente">
  <option value="Ernst Reuter Büste">
  <option value="Ev. Stephanus Kirche">
  <option value="Gedenkstein Opfer der Berliner Mauer">
  <option label="U Pankstr" value="Gewachsen auf Beton Mural">
  <option value="Haus Graffiti">
  <option value="Hausmalerei">
  <option value="Hauswächter">
  <option label="EX-Raid Arena" value="Hippo Fountain">
  <option value="Humboldtpark">
  <option label="Bellermannstr." value="Jungfräulich Maria St.">
  <option value="Jux und Tollerei">
  <option label="EX-Raid Arena" value="Kamel">
  <option value="Kulturverein Christiana">
  <option value="Mother Statue">
  <option value="Portal zur Kaiser Wilhelm und Augusta Stiftung">
  <option value="Rosengarten am Humboldthain">
  <option value="S-Bahnhof Bornholmer Straße">
  <option value="Shadow People">
  <option value="Springbrunnen am Rathaus">
  <option label="EX-Raid Arena" value="St. Sebastian-Kirche">
  <option label="Jüdisches Krankenhaus" value="Stolpersteine Georg und Rudolf Juliusburger">
  <option value="Swinemünder Brücke">
  <option value="The Real Old Mechanical Door">
  <option value="U-Bahnhof Osloer Straße">
  <option value="Vergessene Brücke">
  <option label="Hotel" value="Wyndham Garden Entrance Relief">
  <option label="EX-Raid Arena" value="Zwillingsstatue">
</datalist>
<br><br>

Schlüpfzeit:
<input type="time" id="time" style="font-size:100%;font-family:calibri" oninput="checkHatchTime()"></input><div id="timeh" style="color:red;font-size:medium;font-family:calibri"></div>
<br>

Startzeit:
<input type="time" id="start" style="font-size:100%;font-family:calibri" oninput="checkStartTime()"></input><div id="starth" style="color:red;font-size:medium;font-family:calibri"></div>

<br>
Teilnehmer: <br>
<textarea id="player" rows="3" cols="30" style="font-size:100%;font-family:calibri"></textarea>

<br><br>Drücke auf "Start!", überprüfe ob deine Angaben stimmen und drücke dann auf "In WhatsApp Posten".<br><br>

<button onclick="generateRaid()" style="font-size:100%;font-family:calibri">Start!</button>

<br><br>
<div id="ex" style="font-size:medium;"></div>
<br>
<!--div id="demo"></div>
<br-->
<div id="but"></div>
<br>

<div class="dis" style="font-size:medium;">Made by kimahree. This website is not affiliated with Niantic or Nintendo.<br>Pokémon And All Respective Names are Trademark & © of Nintendo 1996-2019.</div>

<script>

var ex = ["Amtsgericht Wedding", "Ente", "Hippo Fountain", "Kamel", "St. Sebastian-Kirche", "Zwillingsstatue"];

var maps = [
"https://goo.gl/maps/LJthotdr7b72", // 1892 Historisches Gebäude
"https://goo.gl/maps/pCd3BJgke8B2", // AEG Beamtentor
"https://goo.gl/maps/q79rW3P5iz82", // Amtsgericht Wedding (EX)
"https://goo.gl/maps/NoMxjQmX8Yz",  // Bahnhof Humboldthain
"https://goo.gl/maps/P6fLg6nSaKM2", // Bahnsteig S-Bahnhof Gesundbrunnen
"https://goo.gl/maps/bM2QWrCkDhq",  // Balance on the Globe
"https://goo.gl/maps/7ggyACh3c7y",  // Berliner Mauer S Wollankstraße
"https://goo.gl/maps/LUjPLZgELHR2", // Birkenmural
"https://goo.gl/maps/borFEx1Zp3D2", // Bornholmer Straße Border Crossing
"https://goo.gl/maps/Fkb2uqJf8kJ2", // Bösebrücke Bornholmer Straße
"https://goo.gl/maps/WqegcLtthPx",  // Brunnen DRK
"https://goo.gl/maps/QEN9FksYAUR2", // Brunnenstraße
"https://goo.gl/maps/Q5xj3TTdQfR2", // Bunker Humboldthain
"https://goo.gl/maps/BD6HAd3WwAC2", // Drei-Säulen-Brunnen
"https://goo.gl/maps/6WQqtbYTLFD2", // Eingangstor St. Elisabeth
"https://goo.gl/maps/9BhrrYtz8432", // Ente (EX)
"https://goo.gl/maps/c3bK2hVWqy32", // Ernst Reuter Büste
"https://goo.gl/maps/Yxwu2ubRmm52", // Ev. Stephanus Kirche
"https://goo.gl/maps/vKCJtW7CXjm",  // Gedenkstein Opfer der Berliner Mauer
"https://goo.gl/maps/8MVUihQXCQ82", // Gewachsen auf Beton Mural
"https://goo.gl/maps/NJWvyGY1xN22", // Haus Graffiti
"https://goo.gl/maps/wJXuVvpzvTv",  // Hausmalerei
"https://goo.gl/maps/Yv9g8aRw9S72", // Hauswächter
"https://goo.gl/maps/zRQmhYSnYTG2", // Hippo Fountain (EX)
"https://goo.gl/maps/L6gci4KrmRM2", // Humboldtpark
"https://goo.gl/maps/4qMqQB4rPXG2", // Jungfräulich Maria St.
"https://goo.gl/maps/vLZcbgbGXrD2", // Jux und Tollerei
"https://goo.gl/maps/xCWVtJhqw1r",  // Kamel (EX)
"https://goo.gl/maps/Mks22S8syUn",  // Kulturverein Christiana
"https://goo.gl/maps/obrXpaCe8Kp",  // Mother Statue
"https://goo.gl/maps/Z132sxwCnHE2", // Portal zur Kaiser Wilhelm und Augusta Stiftung
"https://goo.gl/maps/uuFsiJBmDp72", // Rosengarten am Humboldthain
"https://goo.gl/maps/fTpjjxxPXbK2", // S-Bahnhof Bornholmer Straße
"https://goo.gl/maps/PzqU2mtenL42", // Shadow People
"https://goo.gl/maps/j5WL5s81k2K2", // Springbrunnen am Rathaus
"https://goo.gl/maps/za2Fq6XPC5t",  // St. Sebastian-Kirche (EX)
"https://goo.gl/maps/kPsKT4sGpPK2", // Stolpersteine Georg und Rudolf Juliusburger
"https://goo.gl/maps/hH2WCCHeLwK2", // Swinemünder Brücke
"https://goo.gl/maps/WvKP2eCWdu12", // The Real Old Mechanical Door
"https://goo.gl/maps/67rcURgu1Y82", // U-Bahnhof Osloer Straße
"https://goo.gl/maps/NTR2AcNt6pp",  // Vergessene Brücke
"https://goo.gl/maps/o2XreJkiJTx",  // Wyndham Garden Entrance Relief
"https://goo.gl/maps/q1rctADEE8q"   // Zwillingsstatue (EX)
]

function generateRaid() {
  document.getElementById("ex").innerHTML = "";
  //document.getElementById("demo").innerHTML = "";
  document.getElementById("but").innerHTML = "";

  var text = ""
  var gym = document.getElementById("gym").value;
  var raid = document.getElementById("raid").value;
  var time = document.getElementById("time").value;
  var start = document.getElementById("start").value;
  var diff = (document.getElementById("start").valueAsNumber - document.getElementById("time").valueAsNumber) / 60000;
  var player = document.getElementById("player").value;
  player = player.replace(/\n/g,"<br>")
  
  if (ex.find(checkEx)) {
    text = text + "🎗 <b>EX-Raid Arena</b> 🎗 <br>";
  }
  
  text = text + "<b>" + raid + " " + gym + "</b> ";
  
  if (time) {
	text = text + "(🐣" + time + ")";
  }
  
  var gyms = document.getElementById("gyms");
  var i;
  for (i=0; gyms.options[i].value != gym; i++) {}
  
  text = text + "<br>" + maps[i];
  
  text = text + "<br><br><b>Start:</b> ";
   
  if ((diff <= 45 && diff >= 0) || (time == "" && start != "")) {
	text = text + start;
  } else {
    text = text + "?";
  }
  text = text + "<br><br>" + player
  document.getElementById("ex").innerHTML = text;
  
  var text2 = text.replace(/<br>/g,"\n");
  text2 = text2.replace(/<b>/g,"*");
  text2 = text2.replace(/<\/b>/g,"*");
  
  /*var ta = document.createElement("TEXTAREA");
  
  var att1 = document.createAttribute("rows");
  att1.value = "10";
  ta.setAttributeNode(att1);
  
  var att2 = document.createAttribute("cols");
  att2.value = "75";
  ta.setAttributeNode(att2);
  
  var att3 = document.createAttribute("readonly");
  ta.setAttributeNode(att3);
  
  var att4 = document.createAttribute("style");
  att4.value = "font-size:100%;font-family:calibri";
  ta.setAttributeNode(att4);
  
  ta.appendChild(document.createTextNode(text2));
  
  document.getElementById("demo").appendChild(ta);
  */
  var n = encodeURIComponent(text2);
  var bu = document.createElement("BUTTON");
  
  var btt1 = document.createAttribute("onclick");
  btt1.value = "location.href='https://api.whatsapp.com/send?text=" + n + "';";
  bu.setAttributeNode(btt1);
  
  var btt2 = document.createAttribute("style");
  btt2.value = "font-size:100%;font-family:calibri";
  bu.setAttributeNode(btt2);
  
  var bt = document.createTextNode("In WhatsApp Posten");
  bu.appendChild(bt);
  
  document.getElementById("but").appendChild(bu);
}

function checkHatchTime() {
  var hat = new Date();
  var hat2 = new Date(hat.toDateString());
  var hatch = document.getElementById("time").valueAsNumber;
  hat2 = hat - hat2;
  hat2 = hatch - hat2;
  if (hatch < 21600000) {
    document.getElementById("timeh").innerHTML = "Raids schlüpfen nicht vor 6 Uhr.";
  } else if (hatch > 75600000) {
    document.getElementById("timeh").innerHTML = "Raids schlüpfen nicht nach 21 Uhr.";
  } else if (hat2 < -2700000) {
    document.getElementById("timeh").innerHTML = "Dieser Raid ist bereits abgelaufen.";
  } else {
    document.getElementById("timeh").innerHTML = "";
  }
}

function checkStartTime() {
  var now = new Date();
  var now2 = new Date(now.toDateString());
  var sta = document.getElementById("start").valueAsNumber;
  var hat = document.getElementById("time").valueAsNumber;
  now2 = now - now2;
  now2 = sta - now2;
  hat = sta - hat;
  
  var ste = document.createAttribute("style");
  ste.value = "color:red;font-size:medium;font-family:calibri";
 
  
  if (now2 < 0) {
	document.getElementById("starth").innerHTML = "Die Startzeit kann nicht in der Vergangenheit liegen.";
  } else if (hat > 2700000) {
    document.getElementById("starth").innerHTML = "Die Startzeit muss innerhalb von 45 Minuten nach der Schlüpfzeit sein."
  } else if (hat > 2400000) {
	ste.value = "color:black;font-size:medium;font-family:calibri";
    document.getElementById("starth").innerHTML = "Der Raidboss hat weniger als 5 Minuten Restzeit bei dieser Startzeit.";
  } else if (hat < 0) {
	document.getElementById("starth").innerHTML = "Die Startzeit kann nicht vor der Schlüpfzeit sein.";
  } else {
    document.getElementById("starth").innerHTML = "";
  }
  
  document.getElementById("starth").setAttributeNode(ste);
}
  
function checkEx(ext) {
  return ext == document.getElementById("gym").value;
}
</script>

</body>
</html>
